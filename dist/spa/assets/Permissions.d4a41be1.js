import{_ as N,p as P,r as o,q as _,t as d,E as I,z as a,y as s,G as S,J as l,B as n,C as b,f,x as c,K as p,aI as q,R as w}from"./index.4ac76403.js";import{Q as h,b as r}from"./QCard.31d5c3cb.js";import{Q as x,a as v}from"./QTable.d65de6e2.js";import{j as D,i as B,h as u,Q}from"./QDialog.2df1b7e0.js";import{Q as U}from"./QSeparator.d322f4ad.js";import{Q as z,C}from"./ClosePopup.63eeea50.js";import{Q as R}from"./QPage.c0d0babb.js";import{Q as T}from"./QSpace.0923a10c.js";import{Q as y}from"./QInput.f4474e1e.js";import{Q as k}from"./QCardActions.76c17390.js";import{Q as A}from"./QForm.82767e93.js";import{_ as E}from"./VxIcon.140795fd.js";import"./QMarkupTable.e7ae0b29.js";import"./QSelect.01e4bf9c.js";import"./use-key-composition.762f81a8.js";import"./uid.9b787859.js";const g={Name:null,Description:null},F=P({props:["user"],components:{VxIcon:E},setup(){const e=[{name:"index",label:"#",align:"center"},{name:"Name",label:"Nama",align:"left",field:"Name",sortable:!0},{name:"Deskripsi",label:"Deskripsi",align:"left",field:"Description",sortable:!0},{name:"action",label:"Action",align:"right"}];return{rows:o([]),columns:e,pagination:o({page:1,rowsPerPage:10}),search:o(""),totalPages:o(0),form_dialog:o(!1),confirm:o(!1),is_edit:o(!1),loading:o(!1),id:o(""),form:o(structuredClone(g))}},mounted(){this.getData()},methods:{getData(){this.loading=!0,this.$api.get("/permissions").then(e=>{this.rows=e.data.data,this.loading=!1}).catch(e=>{console.log(e),this.loading=!1})},openDialog(e){e?(this.is_edit=!0,this.id=e.ID,delete e.Password,this.form={...e}):(this.form={...g},this.is_edit=!1),this.form_dialog=!0},closeDialog(){this.form={...g},this.form_dialog=!1,this.loading=!1},submit(){this.loading=!0,this.is_edit?this.$api.put("/permissions/"+this.id,{...this.form,UpdateBy:this.user.Username}).then(e=>{this.$q.notify({message:"Permission berhasil diubah",color:"positive"}),this.closeDialog(),this.$refs.tableRef.requestServerInteraction()}).catch(e=>{this.closeDialog(),console.log(e)}):this.$api.post("/permissions",{...this.form,CreatedBy:this.user.Username}).then(e=>{this.$q.notify({message:"Permission berhasil ditambahkan",color:"positive"}),this.closeDialog(),this.$refs.tableRef.requestServerInteraction()}).catch(e=>{this.closeDialog(),console.log(e)})},confirmDelete(e){this.id=e,this.confirm=!0},deleteData(){this.$api.delete("/permissions/"+this.id).then(e=>{this.$q.notify({message:"Permission berhasil dihapus",color:"positive"}),this.$refs.tableRef.requestServerInteraction(),this.confirm=!1}).catch(e=>{console.log(e),this.confirm=!1})}}}),M=p("div",{class:"tw-text-3xl tw-mb-4"},"Permission",-1),j=p("div",{class:"tw-flex tw-justify-between tw-w-full"},null,-1),K={class:"text-h6"},G={class:"text-h6 text-negative tw-flex tw-items-center"};function H(e,t,J,L,W,Y){const m=_("vx-icon"),V=_("VxIcon");return d(),I(S,null,[a(R,{class:"tw-p-6"},{default:s(()=>[M,a(h,{flat:""},{default:s(()=>[a(r,{class:"text-primary tw-font-bold"},{default:s(()=>[a(l,{outline:"","no-caps":"",color:"primary",onClick:t[0]||(t[0]=i=>e.openDialog(null))},{default:s(()=>[a(m,{iconName:"AddCircle",class:"tw-mr-2",size:20}),n(" Tambah ")]),_:1})]),_:1}),a(r,{class:"q-pt-none"},{default:s(()=>[a(x,{flat:"",ref:"tableRef",class:"remove-padding-table-top",loading:e.loading,rows:e.rows,columns:e.columns,pagination:{rowsPerPage:10}},{top:s(()=>[j]),"body-cell-index":s(i=>[a(v,{props:i},{default:s(()=>[n(b(i.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-action":s(i=>[a(v,{props:i},{default:s(()=>[a(l,{flat:"",dense:"",size:"sm",color:"primary"},{default:s(()=>[a(m,{iconName:"More",size:18}),a(B,{"auto-close":"",class:"tw-shadow-none tw-border"},{default:s(()=>[a(z,{style:{"min-width":"100px"}},{default:s(()=>[f((d(),c(Q,{clickable:"",class:"text-primary",onClick:$=>e.openDialog(i.row)},{default:s(()=>[a(u,{avatar:""},{default:s(()=>[a(m,{iconName:"Edit",size:20})]),_:1}),a(u,null,{default:s(()=>[n("Ubah")]),_:1})]),_:2},1032,["onClick"])),[[w]]),a(U),f((d(),c(Q,{clickable:"",class:"text-negative",onClick:$=>e.confirmDelete(i.row.ID)},{default:s(()=>[a(u,{avatar:""},{default:s(()=>[a(m,{iconName:"Trash",size:20})]),_:1}),a(u,null,{default:s(()=>[n("Hapus")]),_:1})]),_:2},1032,["onClick"])),[[w]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["loading","rows","columns"])]),_:1})]),_:1})]),_:1}),a(D,{modelValue:e.form_dialog,"onUpdate:modelValue":t[3]||(t[3]=i=>e.form_dialog=i)},{default:s(()=>[a(h,{style:{"min-width":"600px"}},{default:s(()=>[a(r,{class:"row items-center"},{default:s(()=>[p("div",K,b(e.is_edit?"Ubah":"Tmabah")+" Permission",1),a(T),f((d(),c(l,{flat:"",round:"",dense:""},{default:s(()=>[a(m,{iconName:"CloseCircle",size:20})]),_:1})),[[C]])]),_:1}),a(A,{onSubmit:q(e.submit,["prevent"])},{default:s(()=>[a(r,{class:"tw-space-y-2"},{default:s(()=>[a(y,{modelValue:e.form.Name,"onUpdate:modelValue":t[1]||(t[1]=i=>e.form.Name=i),filled:"",label:"Nama",rules:[i=>!!i||"Field harus diisi"]},null,8,["modelValue","rules"]),a(y,{modelValue:e.form.Description,"onUpdate:modelValue":t[2]||(t[2]=i=>e.form.Description=i),filled:"",label:"Deskripsi",type:"textarea"},null,8,["modelValue"])]),_:1}),a(k,{align:"right"},{default:s(()=>[a(l,{label:"Batal","no-caps":"",flat:"",onClick:e.closeDialog,color:"negative"},null,8,["onClick"]),a(l,{label:"Simpan",loading:e.loading,type:"submit","no-caps":"",flat:"",color:"primary"},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),a(D,{modelValue:e.confirm,"onUpdate:modelValue":t[4]||(t[4]=i=>e.confirm=i)},{default:s(()=>[a(h,null,{default:s(()=>[a(r,null,{default:s(()=>[p("div",G,[a(V,{iconName:"Warning2",class:"tw-mr-2",size:22}),n(" Konfirmasi ")])]),_:1}),a(r,{class:"q-pt-none"},{default:s(()=>[n(" Anda yakin ingin menghapus data ini? ")]),_:1}),a(k,{align:"right"},{default:s(()=>[f(a(l,{flat:"",label:"Cancel","no-caps":""},null,512),[[C]]),a(l,{flat:"",label:"Yes",color:"negative","no-caps":"",onClick:e.deleteData},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var pe=N(F,[["render",H]]);export{pe as default};
